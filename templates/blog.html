{% extends 'base.html' %}
{% load static %}
{% block styles %}
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <!-- for icon documentation: https://materializecss.com/icons.html-->
{% endblock %}
{% block content %}

<style>
  .profile-content {
  overflow: hidden;
  }
  
  .row:before, .row::after{
              display:none !important;
          }
  
  .page-breadcrumb {
  display: inline-block;
  float: left;
  margin: 0;
  list-style: none;
  background-color: transparent;
  border-radius: 50px;
  background: rgba(220, 208, 208, 0.5);
  padding-left: 20px !important;
  padding-right: 20px !important;
  padding-top: 5px !important;
  padding-bottom: 8px !important;
  }
  
  .page-breadcrumb li a{
      text-decoration: none;
  }
  
  .page-breadcrumb:hover{
      background: rgba(220, 208, 208, 0.7);
  
  }
  .shadow-card{
      border-radius: 5px;
      background: #fff;
      box-shadow: 0px 2px 9px rgba(0, 0, 0, 0.2);
  }
  .margin-lus{
    margin-bottom: -10%;
  }
  
  
  @media (max-width: 991px){
    .margin-lus{
    margin-bottom: -2.5%;
  }
  }
  .form-inline input {
     height: 30px;
     border-radius: 5px;
     border: solid 2px green;
     color:black;
     width: 80%;
  
  }
  @media (min-width: 1200px){
    .visibility-col{
    visibility: hidden;
    
  }}
  
  @media (max-width: 991px){
    .visibility-form-search{
    visibility: hidden;
   
     
  }}
  
  @media only screen
      and (min-device-width : 768px)
      and (min-device-width : 991px){
    .visibility-form-search1{
    visibility: hidden;
    
      
  }}
  
  @media (max-width: 991px){
    .marge-top-mobile{
    margin-top: -11%;
     
  }}
  
  .pagination_marge{
      margin-left:45%
  } 
  
  @media (max-width: 991px){
      .pagination_marge{
      margin-left:35%
  }}
  
  @media only screen
      and (min-device-width : 768px)
      and (min-device-width : 991px){
    .visibilty-share{
    visibility: hidden;
      
  }}
  @media only screen
      and (min-device-width : 1200px)
      and (min-device-width : 991px){
      .margin-blog{
        margin-bottom:-3%
  }}

  @media only screen
      and (max-device-width : 768px)
      and (max-device-width : 991px){
  .margin-top-main-page{
    margin-top:-6%
  
  }
  .font-size-head{
    font-size:15px;
  }
}

@media only screen
      and (min-device-width : 768px)
      and (min-device-width : 991px){
.font-size-head{
    font-size:28px;
    margin-top: 2%
  }}

  @media only screen
    and (max-device-width : 768px)
    and (max-device-width : 991px){
  .mobile-nav-toggle {
    position:fixed;
   top:8px
     
}}

  

  </style>
<main  class="margin-top-main-page" id="main" style="background-color:whitesmoke;">
    <section id="breadcrumbs" class="breadcrumbs posititon-relative">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <p class="text-white font-size-head"> <strong>Nos articles</strong></p>
                <form method="GET" action="" class="form-inline visibility-form-search1 d-flex justify-content-center md-form form-sm active-cyan-2 mt-2">
                  {% csrf_token %}
                      {{blog_search.form.q}} 
                    <button type="submit" class="btn btn-link text-decoration-none" style="color:white;"><i class="icofont-search"></i></button>
                  </form>
              </div>

             
  
        </div>
      </section><!-- End Breadcrumbs -->
<div class="container" style="margin-top:20px; margin-bottom: 10px;">

<div class="row aos-init aos-animate flex-column-reverse flex-md-row" data-aos="fade-up">
  <div class="col-lg-3 stretch-card grid-margin mb-3  order-sm-12 ">
    <div class="card shadow-card"  >
      <div class="card-body">
        <form method="GET" action="" class="form-inline visibility-form-search d-flex justify-content-center md-form form-sm active-cyan-2 mt-2">
          {% csrf_token %}
              {{blog_search.form.q}} 
            <button type="submit" class="btn btn-link text-decoration-none" style="color:green;"><i class="icofont-search"></i></button>
          </form>
        <hr class="marge-top-mobile">
        <h6 class="font-weight-bold mt-1 mb-1">LES PLUS LUS</h6>
        <hr class="mb-3">
        {% for lus in blog2 %}

        <div class="row margin-lus">
        <div class="col-4 ">

          <!--Image-->
          <div class="view overlay z-depth-1 mb-1">
              <img src="{{lus.image.url}}" class="img-fluid" alt="Post">
              <a>
                  <div class="mask rgba-white-slight waves-effect waves-light"></div>
              </a>
          </div>

      </div>
      <div class="col-8 mb-1">

        <!--Post data-->
        <div class="">
            <p class="mb-1">
                <a href="{% url 'article' lus.pk %}" class="text-hover font-weight-bold" style="font-size:12px">{{lus.titre}}</a>
            </p>
            <p class="font-small grey-text h6"  style="margin-top:5px">
                <em>{{lus.date|date:"d M Y" }}</em>
            </p>
        </div>

    </div>
    </div> <!--end row les plus lus-->
    <hr>
    {% endfor %}
    


      </div>
    </div>
  </div> <!-- end colunm-->

  <div class="col-lg-9 stretch-card grid-margin order-sm-1 mb-3">
      <div class="card shadow-card">
        <div class="card-body">
          {% for blog in blog1 %}
          <div class="row  margin-blog" >
            <div class="col-sm-4 grid-margin ">
              <div class="position-relative">
                <a href="{% url 'article' blog.pk %}"> 
                <div class="rotate-img">
                  <img src="{{blog.image.url}}" alt="thumb" class="img-fluid">
                </div>
                </a>
              
              </div>
            </div>
            <div class="col-sm-8  grid-margin " >
              <a href="{% url 'article' blog.pk %}" class="mb-4 mt-0 font-weight-600 text-justify h3 " style="font-family: Galada; color:blue">
                {{blog.titre}}
              </a>
              <div class="fs-13 mb-2">
                <span class="mr-2 font-italic" style="font-weight: 500; color:gray"> {{blog.date|date:"d M Y" }} | <span class="glyphicon glyphicon-user ml-3"></span> {{blog.redacteur}} | <i class="far fa-eye ml-3"></i> Lus: <span style="font-weight: 570;">{{blog.views}}</span></span>
              </div>
              <p class="mt-4 text-justify">
                <a href="{% url 'article' blog.pk %}">{{ blog.text|truncatewords:50 }}</a>
              </p>
              <!-- share link in mobile-->
              <a class="share-btn text-success float-right visibilty-share" 
              data-url="{% url 'article' blog.pk %}" href="{% url 'share-article' blog.pk %}"> <i class="fas fa-share-square"></i> Share </a>
            </div>
          </div>
          <hr>
          {% endfor %}
                  <!-- script for mobile share-->
                    <script>
                      $(document).on('click', '.share-btn', function(event){
                      var data_url = $(this);
                      if (navigator.share) { 
                      navigator.share({
                          title: 'WebShare API Demo',
                          url: data_url.attr("data-url"),
                        }).then(() => {
                          console.log('Thanks for sharing!');
                        })
                        .catch(console.error);
                        } else {
                            shareDialog.classList.add('is-open');
                        }
                    });
                  </script>


<!--<script>
  const $button = document.querySelector('#button')
  if ('share' in navigator) {
    $button.addEventListener('click', share)
    function share() {
      navigator.share({
        title: 'Probando Share API',
        text: 'Suscríbete a Youtube.com/LeonidasEsteban',
        url: './thumb.jpg',
      })
      .then(()=>{
        alert('hemos logrado compartir')
      })
      .catch(()=>{
        alert('no se pudo compartir, prueba usando https en un navegador móvil')
      })
    }
  } else {
    alert('No está disponible el API de web share')
  }
</script>-->

<!--------------------end share mobile share. works when run django on  HTTPS-->
          


          <div class="pagination pagination_marge" >
            <span class="step-links">
                {% if blog1.has_previous %}
                    <a  class="font-weight-bold h2 text-primary " href="?page=1"> <i class="fas fa-chevron-circle-left"></i></a>
                   <!-- <a  class=" font-weight-bold h3 text-primary" href="?page={{ publication1.previous_page_number }}"> <i class="fas fa-caret-left"></i></a>-->
                {% endif %}
        
                <span class="current h3 text-success font-weight-bold ml-4 mr-4">
                    {{ blog1.number }} / {{ blog1.paginator.num_pages }}
                </span>
        
                {% if blog1.has_next %}
                    <a class=" font-weight-bold  h2 text-primary" href="?page={{ blog1.next_page_number }}"><i class="fas fa-chevron-circle-right"></i></a>
                   <!-- <a  class="font-weight-bold h3 text-primary" href="?page={{ publication1.paginator.num_pages }}"> <i class="fas fa-forward"></i></a>-->
                {% endif %}
            </span>
        </div>
        </div>
        
      </div>
      
    </div><!--end colunm-->

    

    
  </div>
  </div>
  </main>
{% endblock %}

  {% block js %}
  <script src="{% static 'assets/js/share.js' %}"></script>
  {% endblock %}